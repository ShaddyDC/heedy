{{define "title"}} {{ .device.Name }} {{end}}
{{define "scripts"}}{{end}}
{{define "body"}}
    <div class="panel panel-default panel-primary">
        <div class="panel-heading">Device Information</div>
        <div class="panel-body">
            <table class="table">
            <tr><td><!--<img class="devicon" alt="Embedded Image" src="data:image/png;base64," />--></td>
                <th><h2>
                    {{if .device.Nickname}}
                        <abbr title="{{ .device.Name }}">{{ .device.Nickname }}</abbr>
                    {{else}}
                        <abbr title="{{ .device.Name }}">{{ .device.Name }}</abbr>
                    {{end}}
                </h2></th></tr>
            <tr><th>API Key</th><td>{{ .device.ApiKey }}</td></tr>
            <tr><td></td><td><canvas id="qrapi" width="80px" height="80px"></div></td></tr>
            </table>
            <script type='text/javascript'>
            $("#qrapi").qrcode({
                "render": "canvas",
                "size": 80,
                "text": "{{ .device.ApiKey }}"
            });
            </script>
        </div>
    </div>


    <div class="panel panel-default">
        <div class="panel-heading">Streams</div>
        <div class="panel-body">
            <table class="table table-striped">
            <tr><th>Name</th><th>Ephemeral?</th><th>Downlink?</th><th></th></tr>
            {{ range $stream := .streams }}
                <tr>
                    <td>{{ $stream.Name }}</td>
                    <td>
                    {{if $stream.Ephemeral}}
                        <div class="yes" />
                    {{else}}
                        <div class="no" />
                    {{end}}
                    </td>
                    <td>
                    {{if $stream.Downlink}}
                        <div class="yes" />
                    {{else}}
                        <div class="no" />
                    {{end}}
                    </td>

                    <td><a href="/secure/stream/{{ $stream.StreamId }}" class="btn btn-default">View</a></td>
                </tr>
            {{ end }}
            </table>


        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">Create Stream for {{ .device.Name }}</div>
        <div class="panel-body">
            <form action="/secure/stream/action/create/devid/{{ .device.DeviceId }}" method="POST">
                <div class="form-group">
                    <label for="streamName">Stream Name</label>
                    <input type="text" name="name" class="form-control" id="streamName" placeholder="Stream Name">
                </div>
                <div class="form-group">
                    <label for="datatype">Type of Data</label>
                    <select id="datatype" name="datatype" class="form-control">
                      <option value="{&quot;type&quot;: &quot;object&quot;,&quot;properties&quot;: {&quot;value&quot;: {&quot;type&quot;: &quot;number&quot;,&quot;description&quot;:&quot;A numeric value&quot;}}}">Number</option>
                      <option value="{&quot;type&quot;: &quot;object&quot;,&quot;properties&quot;: {&quot;latitude&quot;: {&quot;type&quot;: &quot;number&quot;,&quot;description&quot;:&quot;Latitude in DD&quot;},&quot;longitude&quot;: {&quot;type&quot;: &quot;number&quot;,&quot;description&quot;:&quot;Longitude in DD&quot;}}}">Coordinate</option>
                    </select>
                </div>
                <input class="btn btn-primary" type="submit" value="Create">
            </form>
        </div>
    </div>



        <div class="panel panel-default">
            <div class="panel-heading">Edit Device</div>
            <div class="panel-body">
                <form action="/secure/device/{{ .device.DeviceId }}/action/edit" method="POST">
                    <div class="form-group">
                        <label for="shortname">Device Nickname (if blank you'll see the long name)</label>
                        <input type="text" name="shortname" class="form-control" id="shortname" placeholder="Nickname" value="{{.device.Nickname}}">
                    </div>

                    <div class="form-group">
                        <label for="enabled">Enabled (allow this device to read your data)</label>
                        <input type="checkbox" name="enabled" class="checkbox" id="enabled" value='checked' {{if .device.Enabled}}checked="checked"{{end}}>
                    </div>

                    {{ if .user.Admin }}
                        <div class="form-group">
                            <label for="superdevice">Superdevice (allow this device to do anything)</label>
                            <input type="checkbox" name="superdevice" class="checkbox" id="superdevice" value='checked' {{if .device.IsAdmin}}checked="checked"{{end}}>
                        </div>
                    {{ end }}

                    <div class="form-group">
                        <label for="canwrite">Write Access (allows this device to send data to the server for its streams)</label>
                        <input type="checkbox" name="canwrite" class="checkbox" id="canwrite" value='checked' {{if .device.CanWrite}}checked="checked"{{end}}>
                    </div>


                    <div class="form-group">
                        <label for="canwriteanywhere">Write Anywhere (allows this device save data to any device's streams)</label>
                        <input type="checkbox" name="canwriteanywhere" class="checkbox" id="canwriteanywhere" value='checked' {{if .device.CanWriteAnywhere}}checked="checked"{{end}}>
                    </div>

                    <div class="form-group">
                        <label for="userproxy">User Proxy (allows this device to do everything you can do, e.g. create devices, delete information, etc.)</label>
                        <input type="checkbox" name="userproxy" class="checkbox" id="userproxy" value='checked' {{if .device.CanActAsUser}}checked="checked"{{end}}>
                    </div>

                    <input class="btn btn-primary" type="submit" value="Update">
                </form>

            </table>
            </div>
        </div>

{{end}}


{{template "base" . }}
