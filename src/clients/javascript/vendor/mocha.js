(function(){function n(t){var r=n.resolve(t),i=n.modules[r];if(!i)throw new Error('failed to require "'+t+'"');return i.exports||(i.exports={},i.call(i.exports,i,i.exports,n.relative(r))),i.exports}function l(){for(var n=(new h).getTime();e.length&&(new h).getTime()-n<100;)e.shift()();o=e.length?c(l,0):null}var f,s,u,r,e,o;n.modules={};n.resolve=function(t){var u=t,i=t+".js",r=t+"/index.js";return n.modules[i]&&i||n.modules[r]&&r||u};n.register=function(t,i){n.modules[t]=i};n.relative=function(t){return function(i){var r,e,u,f;if("."!=i.charAt(0))return n(i);for(r=t.split("/"),e=i.split("/"),r.pop(),u=0;u<e.length;u++)f=e[u],".."==f?r.pop():"."!=f&&r.push(f);return n(r.join("/"))}};n.register("browser/debug.js",function(n){n.exports=function(){return function(){}}});n.register("browser/diff.js",function(n){var t=function(){function r(n){return{newPos:n.newPos,components:n.components.slice(0)}}function u(n){for(var i=[],t=0;t<n.length;t++)n[t]&&i.push(n[t]);return i}function o(n){var t=n;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t.replace(/"/g,"&quot;")}var n=function(n){this.ignoreWhitespace=n},i,t;n.prototype={diff:function(n,t){var h,i,u,o,s,a,v,e;if(t===n)return[{value:t}];if(!t)return[{value:n,removed:!0}];if(!n)return[{value:t,added:!0}];t=this.tokenize(t);n=this.tokenize(n);var c=t.length,l=n.length,y=c+l,f=[{newPos:-1,components:[]}],e=this.extractCommon(f[0],t,n,0);if(f[0].newPos+1>=c&&e+1>=l)return f[0].components;for(h=1;h<=y;h++)for(i=-1*h;i<=h;i+=2){if(o=f[i-1],s=f[i+1],e=(s?s.newPos:0)-i,o&&(f[i-1]=undefined),a=o&&o.newPos+1<c,v=s&&0<=e&&e<l,!a&&!v){f[i]=undefined;continue}if(!a||v&&o.newPos<s.newPos?(u=r(s),this.pushComponent(u.components,n[e],undefined,!0)):(u=r(o),u.newPos++,this.pushComponent(u.components,t[u.newPos],!0,undefined)),e=this.extractCommon(u,t,n,i),u.newPos+1>=c&&e+1>=l)return u.components;f[i]=u}},pushComponent:function(n,t,i,r){var u=n[n.length-1];u&&u.added===i&&u.removed===r?n[n.length-1]={value:this.join(u.value,t),added:i,removed:r}:n.push({value:t,added:i,removed:r})},extractCommon:function(n,t,i,r){for(var e=t.length,o=i.length,u=n.newPos,f=u-r;u+1<e&&f+1<o&&this.equals(t[u+1],i[f+1]);)u++,f++,this.pushComponent(n.components,t[u],undefined,undefined);return n.newPos=u,f},equals:function(n,t){var i=/\S/;return!this.ignoreWhitespace||i.test(n)||i.test(t)?n===t:!0},join:function(n,t){return n+t},tokenize:function(n){return n}};var s=new n,f=new n(!0),e=new n;return f.tokenize=e.tokenize=function(n){return u(n.split(/(\s+|\b)/))},i=new n(!0),i.tokenize=function(n){return u(n.split(/([{}:;,]|\s+)/))},t=new n,t.tokenize=function(n){for(var r,u,t=[],f=n.split(/^/m),i=0;i<f.length;i++)r=f[i],u=f[i-1],r=="\n"&&u&&u[u.length-1]==="\r"?t[t.length-1]+="\n":r&&t.push(r);return t},{Diff:n,diffChars:function(n,t){return s.diff(n,t)},diffWords:function(n,t){return f.diff(n,t)},diffWordsWithSpace:function(n,t){return e.diff(n,t)},diffLines:function(n,i){return t.diff(n,i)},diffCss:function(n,t){return i.diff(n,t)},createPatch:function(n,i,r,u,f){function b(n){return n.map(function(n){return" "+n})}function d(n,t,i){var r=e[e.length-2],u=t===e.length-2,f=t===e.length-3&&(i.added!==r.added||i.removed!==r.removed);!/\n$/.test(i.value)&&(u||f)&&n.push("\\ No newline at end of file")}var s=[],e,l,c,o,k,w;s.push("Index: "+n);s.push("===================================================================");s.push("--- "+n+(typeof u=="undefined"?"":"\t"+u));s.push("+++ "+n+(typeof f=="undefined"?"":"\t"+f));e=t.diff(i,r);e[e.length-1].value||e.pop();e.push({value:"",lines:[]});var a=0,v=0,h=[],y=1,p=1;for(l=0;l<e.length;l++)c=e[l],o=c.lines||c.value.replace(/\n$/,"").split("\n"),c.lines=o,c.added||c.removed?(a||(k=e[l-1],a=y,v=p,k&&(h=b(k.lines.slice(-4)),a-=h.length,v-=h.length)),h.push.apply(h,o.map(function(n){return(c.added?"+":"-")+n})),d(h,l,c),c.added?p+=o.length:y+=o.length):(a&&(o.length<=8&&l<e.length-2?h.push.apply(h,b(o)):(w=Math.min(o.length,4),s.push("@@ -"+a+","+(y-a+w)+" +"+v+","+(p-v+w)+" @@"),s.push.apply(s,h),s.push.apply(s,b(o.slice(0,w))),o.length<=4&&d(s,l,c),a=0,v=0,h=[])),y+=o.length,p+=o.length);return s.join("\n")+"\n"},applyPatch:function(n,t){for(var s,u,e,o,r=t.split("\n"),f=[],h=!1,c=!1,i=r[0][0]==="I"?4:0;i<r.length;i++)r[i][0]==="@"?(s=r[i].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/),f.unshift({start:s[3],oldlength:s[2],oldlines:[],newlength:s[4],newlines:[]})):r[i][0]==="+"?f[0].newlines.push(r[i].substr(1)):r[i][0]==="-"?f[0].oldlines.push(r[i].substr(1)):r[i][0]===" "?(f[0].newlines.push(r[i].substr(1)),f[0].oldlines.push(r[i].substr(1))):r[i][0]==="\\"&&(r[i-1][0]==="+"?h=!0:r[i-1][0]==="-"&&(c=!0));for(u=n.split("\n"),i=f.length-1;i>=0;i--){for(e=f[i],o=0;o<e.oldlength;o++)if(u[e.start-1+o]!==e.oldlines[o])return!1;Array.prototype.splice.apply(u,[e.start-1,+e.oldlength].concat(e.newlines))}if(h)while(!u[u.length-1])u.pop();else c&&u.push("");return u.join("\n")},convertChangesToXML:function(n){for(var i,t=[],r=0;r<n.length;r++)i=n[r],i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push(o(i.value)),i.added?t.push("<\/ins>"):i.removed&&t.push("<\/del>");return t.join("")},convertChangesToDMP:function(n){for(var r=[],t,i=0;i<n.length;i++)t=n[i],r.push([t.added?1:t.removed?-1:0,t.value]);return r}}}();typeof n!="undefined"&&(n.exports=t)});n.register("browser/escape-string-regexp.js",function(n){"use strict";var t=/[|\\{}()[\]^$+*?.]/g;n.exports=function(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(t,"\\$&")}});n.register("browser/events.js",function(n,t){function r(n){return"[object Array]"=={}.toString.call(n)}function i(){}t.EventEmitter=i;i.prototype.on=function(n,t){return this.$events||(this.$events={}),this.$events[n]?r(this.$events[n])?this.$events[n].push(t):this.$events[n]=[this.$events[n],t]:this.$events[n]=t,this};i.prototype.addListener=i.prototype.on;i.prototype.once=function(n,t){function i(){r.removeListener(n,i);t.apply(this,arguments)}var r=this;i.listener=t;this.on(n,i);return this};i.prototype.removeListener=function(n,t){var i,f,u,e;if(this.$events&&this.$events[n])if(i=this.$events[n],r(i)){for(f=-1,u=0,e=i.length;u<e;u++)if(i[u]===t||i[u].listener&&i[u].listener===t){f=u;break}if(f<0)return this;i.splice(f,1);i.length||delete this.$events[n]}else(i===t||i.listener&&i.listener===t)&&delete this.$events[n];return this};i.prototype.removeAllListeners=function(n){return n===undefined?(this.$events={},this):(this.$events&&this.$events[n]&&(this.$events[n]=null),this)};i.prototype.listeners=function(n){return this.$events||(this.$events={}),this.$events[n]||(this.$events[n]=[]),r(this.$events[n])||(this.$events[n]=[this.$events[n]]),this.$events[n]};i.prototype.emit=function(n){var t,u,f,i,e;if(!this.$events||(t=this.$events[n],!t))return!1;if(u=[].slice.call(arguments,1),"function"==typeof t)t.apply(this,u);else if(r(t))for(f=t.slice(),i=0,e=f.length;i<e;i++)f[i].apply(this,u);else return!1;return!0}});n.register("browser/fs.js",function(){});n.register("browser/glob.js",function(){});n.register("browser/path.js",function(){});n.register("browser/progress.js",function(n){function t(){this.percent=0;this.size(0);this.fontSize(11);this.font("helvetica, arial, sans-serif")}n.exports=t;t.prototype.size=function(n){return this._size=n,this};t.prototype.text=function(n){return this._text=n,this};t.prototype.fontSize=function(n){return this._fontSize=n,this};t.prototype.font=function(n){return this._font=n,this};t.prototype.update=function(n){return this.percent=n,this};t.prototype.draw=function(n){var f,e,c;try{var o=Math.min(this.percent,100),t=this._size,i=t/2,r=i,u=i,s=i-1,h=this._fontSize;n.font=h+"px "+this._font;f=Math.PI*2*(o/100);n.clearRect(0,0,t,t);n.strokeStyle="#9f9f9f";n.beginPath();n.arc(r,u,s,0,f,!1);n.stroke();n.strokeStyle="#eee";n.beginPath();n.arc(r,u,s-1,0,f,!0);n.stroke();e=this._text||(o|0)+"%";c=n.measureText(e).width;n.fillText(e,r-c/2+1,u+h/2-1)}catch(l){}return this}});n.register("browser/tty.js",function(n,t){t.isatty=function(){return!0};t.getWindowSize=function(){return"innerHeight"in i?[i.innerHeight,i.innerWidth]:[640,480]}});n.register("context.js",function(n){function t(){}n.exports=t;t.prototype.runnable=function(n){return 0==arguments.length?this._runnable:(this.test=this._runnable=n,this)};t.prototype.timeout=function(n){return arguments.length===0?this.runnable().timeout():(this.runnable().timeout(n),this)};t.prototype.enableTimeouts=function(n){return this.runnable().enableTimeouts(n),this};t.prototype.slow=function(n){return this.runnable().slow(n),this};t.prototype.skip=function(){return this.runnable().skip(),this};t.prototype.inspect=function(){return JSON.stringify(this,function(n,t){if("_runnable"!=n)return"test"==n?void 0:t},2)}});n.register("hook.js",function(n,t,i){function r(n,t){u.call(this,n,t);this.type="hook"}function f(){}var u=i("./runnable");n.exports=r;f.prototype=u.prototype;r.prototype=new f;r.prototype.constructor=r;r.prototype.error=function(n){if(0==arguments.length){var n=this._error;return this._error=null,n}this._error=n}});n.register("interfaces/bdd.js",function(n,t,i){var r=i("../suite"),u=i("../test"),e=i("../utils"),f=i("browser/escape-string-regexp");n.exports=function(n){var t=[n];n.on("pre-require",function(e,o,s){var h=i("./common")(t,e);e.before=h.before;e.after=h.after;e.beforeEach=h.beforeEach;e.afterEach=h.afterEach;e.run=s.options.delay&&h.runWithSuite(n);e.describe=e.context=function(n,i){var u=r.create(t[0],n);return u.file=o,t.unshift(u),i.call(u),t.shift(),u};e.xdescribe=e.xcontext=e.describe.skip=function(n,i){var u=r.create(t[0],n);u.pending=!0;t.unshift(u);i.call(u);t.shift()};e.describe.only=function(n,t){var i=e.describe(n,t);return s.grep(i.fullTitle()),i};e.it=e.specify=function(n,i){var f=t[0],r;return f.pending&&(i=null),r=new u(n,i),r.file=o,f.addTest(r),r};e.it.only=function(n,t){var i=e.it(n,t),r="^"+f(i.fullTitle())+"$";return s.grep(new RegExp(r)),i};e.xit=e.xspecify=e.it.skip=function(n){e.it(n)}})}});n.register("interfaces/common.js",function(n){"use strict";n.exports=function(n,t){return{runWithSuite:function(n){return function(){n.run()}},before:function(t,i){n[0].beforeAll(t,i)},after:function(t,i){n[0].afterAll(t,i)},beforeEach:function(t,i){n[0].beforeEach(t,i)},afterEach:function(t,i){n[0].afterEach(t,i)},test:{skip:function(n){t.test(n)}}}}});n.register("interfaces/exports.js",function(n,t,i){var r=i("../suite"),u=i("../test");n.exports=function(n){function i(n,f){var h,e,o,s;for(e in n)if("function"==typeof n[e]){o=n[e];switch(e){case"before":t[0].beforeAll(o);break;case"after":t[0].afterAll(o);break;case"beforeEach":t[0].beforeEach(o);break;case"afterEach":t[0].afterEach(o);break;default:s=new u(e,o);s.file=f;t[0].addTest(s)}}else h=r.create(t[0],e),t.unshift(h),i(n[e]),t.shift()}var t=[n];n.on("require",i)}});n.register("interfaces/index.js",function(n,t,i){t.bdd=i("./bdd");t.tdd=i("./tdd");t.qunit=i("./qunit");t.exports=i("./exports")});n.register("interfaces/qunit.js",function(n,t,i){var r=i("../suite"),u=i("../test"),f=i("browser/escape-string-regexp"),e=i("../utils");n.exports=function(n){var t=[n];n.on("pre-require",function(e,o,s){var h=i("./common")(t,e);e.before=h.before;e.after=h.after;e.beforeEach=h.beforeEach;e.afterEach=h.afterEach;e.run=s.options.delay&&h.runWithSuite(n);e.suite=function(n){t.length>1&&t.shift();var i=r.create(t[0],n);return i.file=o,t.unshift(i),i};e.suite.only=function(n,t){var i=e.suite(n,t);s.grep(i.fullTitle())};e.test=function(n,i){var r=new u(n,i);return r.file=o,t[0].addTest(r),r};e.test.only=function(n,t){var i=e.test(n,t),r="^"+f(i.fullTitle())+"$";s.grep(new RegExp(r))};e.test.skip=h.test.skip})}});n.register("interfaces/tdd.js",function(n,t,i){var r=i("../suite"),u=i("../test"),f=i("browser/escape-string-regexp"),e=i("../utils");n.exports=function(n){var t=[n];n.on("pre-require",function(e,o,s){var h=i("./common")(t,e);e.setup=h.beforeEach;e.teardown=h.afterEach;e.suiteSetup=h.before;e.suiteTeardown=h.after;e.run=s.options.delay&&h.runWithSuite(n);e.suite=function(n,i){var u=r.create(t[0],n);return u.file=o,t.unshift(u),i.call(u),t.shift(),u};e.suite.skip=function(n,i){var u=r.create(t[0],n);u.pending=!0;t.unshift(u);i.call(u);t.shift()};e.suite.only=function(n,t){var i=e.suite(n,t);s.grep(i.fullTitle())};e.test=function(n,i){var f=t[0],r;return f.pending&&(i=null),r=new u(n,i),r.file=o,f.addTest(r),r};e.test.only=function(n,t){var i=e.test(n,t),r="^"+f(i.fullTitle())+"$";s.grep(new RegExp(r))};e.test.skip=h.test.skip})}});n.register("mocha.js",function(n,r,u){
/*!
 * mocha
 * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */
function h(n){return __dirname+"/../images/"+n+".png"}function f(n){n=n||{};this.files=[];this.options=n;n.grep&&this.grep(new RegExp(n.grep));n.fgrep&&this.grep(n.fgrep);this.suite=new r.Suite("",new r.Context);this.ui(n.ui);this.bail(n.bail);this.reporter(n.reporter,n.reporterOptions);null!=n.timeout&&this.timeout(n.timeout);this.useColors(n.useColors);n.enableTimeouts!==null&&this.enableTimeouts(n.enableTimeouts);n.slow&&this.slow(n.slow);this.suite.on("pre-require",function(n){r.afterEach=n.afterEach||n.teardown;r.after=n.after||n.suiteTeardown;r.beforeEach=n.beforeEach||n.setup;r.before=n.before||n.suiteSetup;r.describe=n.describe||n.suite;r.it=n.it||n.test;r.setup=n.setup||n.beforeEach;r.suiteSetup=n.suiteSetup||n.before;r.suiteTeardown=n.suiteTeardown||n.after;r.suite=n.suite||n.describe;r.teardown=n.teardown||n.afterEach;r.test=n.test||n.it;r.run=n.run})}var o=u("browser/path"),c=u("browser/escape-string-regexp"),l=u("./utils"),s,e;r=n.exports=f;typeof t!="undefined"&&typeof t.cwd=="function"&&(s=o.join,e=t.cwd(),n.paths.push(e,s(e,"node_modules")));r.utils=l;r.interfaces=u("./interfaces");r.reporters=u("./reporters");r.Runnable=u("./runnable");r.Context=u("./context");r.Runner=u("./runner");r.Suite=u("./suite");r.Hook=u("./hook");r.Test=u("./test");f.prototype.bail=function(n){return 0==arguments.length&&(n=!0),this.suite.bail(n),this};f.prototype.addFile=function(n){return this.files.push(n),this};f.prototype.reporter=function(n,t){if("function"==typeof n)this._reporter=n;else{n=n||"spec";var i;try{i=u("./reporters/"+n)}catch(r){}if(!i)try{i=u(n)}catch(r){r.message.indexOf("Cannot find module")!==-1?console.warn('"'+n+'" reporter not found'):console.warn('"'+n+'" reporter blew up with error:\n'+r.stack)}if(i||n!=="teamcity"||console.warn("The Teamcity reporter was moved to a package named mocha-teamcity-reporter (https://npmjs.org/package/mocha-teamcity-reporter)."),!i)throw new Error('invalid reporter "'+n+'"');this._reporter=i}return this.options.reporterOptions=t,this};f.prototype.ui=function(n){if(n=n||"bdd",this._ui=r.interfaces[n],!this._ui)try{this._ui=u(n)}catch(t){}if(!this._ui)throw new Error('invalid interface "'+n+'"');return this._ui=this._ui(this.suite),this};f.prototype.loadFiles=function(n){var t=this,r=this.suite,f=this.files.length;this.files.forEach(function(e){e=o.resolve(e);r.emit("pre-require",i,e,t);r.emit("require",u(e),e,t);r.emit("post-require",i,e,t);--f||n&&n()})};f.prototype._growl=function(n,t){var i=u("growl");n.on("end",function(){var r=t.stats,u;r.failures?(u=r.failures+" of "+n.total+" tests failed",i(u,{name:"mocha",title:"Failed",image:h("error")})):i(r.passes+" tests passed in "+r.duration+"ms",{name:"mocha",title:"Passed",image:h("ok")})})};f.prototype.grep=function(n){return this.options.grep="string"==typeof n?new RegExp(c(n)):n,this};f.prototype.invert=function(){return this.options.invert=!0,this};f.prototype.ignoreLeaks=function(n){return this.options.ignoreLeaks=!!n,this};f.prototype.checkLeaks=function(){return this.options.ignoreLeaks=!1,this};f.prototype.fullTrace=function(){return this.options.fullStackTrace=!0,this};f.prototype.growl=function(){return this.options.growl=!0,this};f.prototype.globals=function(n){return this.options.globals=(this.options.globals||[]).concat(n),this};f.prototype.useColors=function(n){return n!==undefined&&(this.options.useColors=n),this};f.prototype.useInlineDiffs=function(n){return this.options.useInlineDiffs=arguments.length&&n!=undefined?n:!1,this};f.prototype.timeout=function(n){return this.suite.timeout(n),this};f.prototype.slow=function(n){return this.suite.slow(n),this};f.prototype.enableTimeouts=function(n){return this.suite.enableTimeouts(arguments.length&&n!==undefined?n:!0),this};f.prototype.asyncOnly=function(){return this.options.asyncOnly=!0,this};f.prototype.noHighlighting=function(){return this.options.noHighlighting=!0,this};f.prototype.delay=function(){return this.options.delay=!0,this};f.prototype.run=function(n){function e(t){u.done?u.done(t,n):n&&n(t)}var f,t,i,u;return this.files.length&&this.loadFiles(),f=this.suite,t=this.options,t.files=this.files,i=new r.Runner(f,t.delay),u=new this._reporter(i,t),i.ignoreLeaks=!1!==t.ignoreLeaks,i.fullStackTrace=t.fullStackTrace,i.asyncOnly=t.asyncOnly,t.grep&&i.grep(t.grep,t.invert),t.globals&&i.globals(t.globals),t.growl&&this._growl(i,u),t.useColors!==undefined&&(r.reporters.Base.useColors=t.useColors),r.reporters.Base.inlineDiffs=t.useInlineDiffs,i.run(e)}});n.register("ms.js",function(n){function o(n){var o=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(n),f,s;if(o){f=parseFloat(o[1]);s=(o[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"y":return f*e;case"days":case"day":case"d":return f*u;case"hours":case"hour":case"h":return f*r;case"minutes":case"minute":case"m":return f*i;case"seconds":case"second":case"s":return f*t;case"ms":return f}}}function s(n){return n>=u?Math.round(n/u)+"d":n>=r?Math.round(n/r)+"h":n>=i?Math.round(n/i)+"m":n>=t?Math.round(n/t)+"s":n+"ms"}function h(n){return f(n,u,"day")||f(n,r,"hour")||f(n,i,"minute")||f(n,t,"second")||n+" ms"}function f(n,t,i){if(!(n<t))return n<t*1.5?Math.floor(n/t)+" "+i:Math.ceil(n/t)+" "+i+"s"}var t=1e3,i=t*60,r=i*60,u=r*24,e=u*365.25;n.exports=function(n,t){return(t=t||{},"string"==typeof n)?o(n):t.long?h(n):s(n)}});n.register("pending.js",function(n){function t(n){this.message=n}n.exports=t});n.register("reporters/base.js",function(n,r,u){function c(n){var r=this,t=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},i=this.failures=[];if(n){this.runner=n;n.stats=t;n.on("start",function(){t.start=new h});n.on("suite",function(n){t.suites=t.suites||0;n.root||t.suites++});n.on("test end",function(){t.tests=t.tests||0;t.tests++});n.on("pass",function(n){t.passes=t.passes||0;var i=n.slow()/2;n.speed=n.duration>n.slow()?"slow":n.duration>i?"medium":"fast";t.passes++});n.on("fail",function(n,r){t.failures=t.failures||0;t.failures++;n.err=r;i.push(n)});n.on("end",function(){t.end=new h;t.duration=new h-t.start});n.on("pending",function(){t.pending++})}}function w(n,t){return n=String(n),Array(t-n.length+1).join(" ")+n}function b(n,t){var i=d(n,"WordsWithSpace",t),r=i.split("\n"),u;return r.length>4&&(u=String(r.length).length,i=r.map(function(n,t){return w(++t,u)+" | "+n}).join("\n")),i="\n"+f("diff removed","actual")+" "+f("diff added","expected")+"\n\n"+i+"\n",i.replace(/^/gm,"      ")}function k(n,t){function r(n){return(t&&(n=l(n)),n[0]==="+")?i+o("diff added",n):n[0]==="-"?i+o("diff removed",n):n.match(/\@\@/)?null:n.match(/\\ No newline/)?null:i+n}function u(n){return n!=null}var i="      ",f=a.createPatch("string",n.actual,n.expected),e=f.split("\n").splice(4);return"\n      "+o("diff added","+ expected")+" "+o("diff removed","- actual")+"\n\n"+e.map(r).filter(u).join("\n")}function d(n,t,i){var r=i?l(n.actual):n.actual,u=i?l(n.expected):n.expected;return a["diff"+t](r,u).map(function(n){return n.added?o("diff added",n.value):n.removed?o("diff removed",n.value):n.value}).join("")}function l(n){return n.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")}function o(n,t){return t.split("\n").map(function(t){return f(n,t)}).join("\n")}function g(n,t){return n=Object.prototype.toString.call(n),t=Object.prototype.toString.call(t),n==t}var s=u("browser/tty"),a=u("browser/diff"),y=u("../ms"),v=u("../utils"),p=t.env?u("supports-color"):null,h=i.Date,nt=i.setTimeout,tt=i.setInterval,it=i.clearTimeout,rt=i.clearInterval,e=s.isatty(1)&&s.isatty(2),f;r=n.exports=c;r.useColors=t.env?p||t.env.MOCHA_COLORS!==undefined:!1;r.inlineDiffs=!1;r.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41};r.symbols={ok:"✓",err:"✖",dot:"․"};"win32"==t.platform&&(r.symbols.ok="√",r.symbols.err="×",r.symbols.dot=".");f=r.color=function(n,t){return r.useColors?"\x1b["+r.colors[n]+"m"+t+"\x1b[0m":String(t)};r.window={width:e?t.stdout.getWindowSize?t.stdout.getWindowSize(1)[0]:s.getWindowSize()[1]:75};r.cursor={hide:function(){e&&t.stdout.write("\x1b[?25l")},show:function(){e&&t.stdout.write("\x1b[?25h")},deleteLine:function(){e&&t.stdout.write("\x1b[2K")},beginningOfLine:function(){e&&t.stdout.write("\x1b[0G")},CR:function(){e?(r.cursor.deleteLine(),r.cursor.beginningOfLine()):t.stdout.write("\r")}};r.list=function(n){console.log();n.forEach(function(n,t){var a=f("error title","  %s) %s:\n")+f("error message","     %s")+f("error stack","\n%s\n"),i=n.err,e=i.message||"",u=i.stack||e,o=u.indexOf(e),s=i.actual,h=i.expected,c=!0,l;o===-1?msg=e:(o+=e.length,msg=u.slice(0,o),u=u.slice(o+1));i.uncaught&&(msg="Uncaught "+msg);i.showDiff!==!1&&g(s,h)&&h!==undefined&&("string"!=typeof s&&(c=!1,i.actual=s=v.stringify(s),i.expected=h=v.stringify(h)),a=f("error title","  %s) %s:\n%s")+f("error stack","\n%s\n"),l=e.match(/^([^:]+): expected/),msg="\n      "+f("error message",l?l[1]:msg)+(r.inlineDiffs?b(i,c):k(i,c)));u=u.replace(/^/gm,"  ");console.log(a,t+1,n.fullTitle(),msg,u)})};c.prototype.epilogue=function(){var n=this.stats,t;console.log();t=f("bright pass"," ")+f("green"," %d passing")+f("light"," (%s)");console.log(t,n.passes||0,y(n.duration));n.pending&&(t=f("pending"," ")+f("pending"," %d pending"),console.log(t,n.pending));n.failures&&(t=f("fail","  %d failing"),console.log(t,n.failures),c.list(this.failures),console.log());console.log()}});n.register("reporters/doc.js",function(n,t,i){function f(n){function t(){return Array(i).join("  ")}u.call(this,n);var f=this,e=this.stats,o=n.total,i=2;n.on("suite",function(n){n.root||(++i,console.log('%s<section class="suite">',t()),++i,console.log("%s<h1>%s<\/h1>",t(),r.escape(n.title)),console.log("%s<dl>",t()))});n.on("suite end",function(n){n.root||(console.log("%s<\/dl>",t()),--i,console.log("%s<\/section>",t()),--i)});n.on("pass",function(n){console.log("%s  <dt>%s<\/dt>",t(),r.escape(n.title));var i=r.escape(r.clean(n.fn.toString()));console.log("%s  <dd><pre><code>%s<\/code><\/pre><\/dd>",t(),i)});n.on("fail",function(n,i){console.log('%s  <dt class="error">%s<\/dt>',t(),r.escape(n.title));var u=r.escape(r.clean(n.fn.toString()));console.log('%s  <dd class="error"><pre><code>%s<\/code><\/pre><\/dd>',t(),u);console.log('%s  <dd class="error">%s<\/dd>',t(),r.escape(i))})}var u=i("./base"),r=i("../utils");t=n.exports=f});n.register("reporters/dot.js",function(n,i,r){function e(n){u.call(this,n);var e=this,o=this.stats,i=u.window.width*.75|0,r=-1;n.on("start",function(){t.stdout.write("\n")});n.on("pending",function(){++r%i==0&&t.stdout.write("\n  ");t.stdout.write(f("pending",u.symbols.dot))});n.on("pass",function(n){++r%i==0&&t.stdout.write("\n  ");"slow"==n.speed?t.stdout.write(f("bright yellow",u.symbols.dot)):t.stdout.write(f(n.speed,u.symbols.dot))});n.on("fail",function(){++r%i==0&&t.stdout.write("\n  ");t.stdout.write(f("fail",u.symbols.dot))});n.on("end",function(){console.log();e.epilogue()})}function o(){}var u=r("./base"),f=u.color;i=n.exports=e;o.prototype=u.prototype;e.prototype=new o;e.prototype.constructor=e});n.register("reporters/html-cov.js",function(n,i,r){function e(n){var e=r("jade"),i=__dirname+"/templates/coverage.jade",s=f.readFileSync(i,"utf8"),h=e.compile(s,{filename:i}),c=this;u.call(this,n,!1);n.on("end",function(){t.stdout.write(h({cov:c.cov,coverageClass:o}))})}function o(n){return n>=75?"high":n>=50?"medium":n>=25?"low":"terrible"}var u=r("./json-cov"),f=r("browser/fs");i=n.exports=e});n.register("reporters/html.js",function(n,t,r){function f(n){var k;y.call(this,n);var g=this,d=this.stats,st=n.total,nt=u(l),f=nt.getElementsByTagName("li"),rt=f[1].getElementsByTagName("em")[0],ut=f[1].getElementsByTagName("a")[0],ft=f[2].getElementsByTagName("em")[0],et=f[2].getElementsByTagName("a")[0],ot=f[3].getElementsByTagName("em")[0],i=nt.getElementsByTagName("canvas")[0],t=u('<ul id="mocha-report"><\/ul>'),r=[t],e,tt,it=document.getElementById("mocha");if(i.getContext&&(k=window.devicePixelRatio||1,i.style.width=i.width,i.style.height=i.height,i.width*=k,i.height*=k,tt=i.getContext("2d"),tt.scale(k,k),e=new p),!it)return b("#mocha div missing, add it to your document");s(ut,"click",function(){v();var n=/pass/.test(t.className)?"":" pass";t.className=t.className.replace(/fail|pass/g,"")+n;t.className.trim()&&a("test pass")});s(et,"click",function(){v();var n=/fail/.test(t.className)?"":" fail";t.className=t.className.replace(/fail|pass/g,"")+n;t.className.trim()&&a("test fail")});it.appendChild(nt);it.appendChild(t);e&&e.size(40);n.on("suite",function(n){if(!n.root){var i=g.suiteURL(n),t=u('<li class="suite"><h1><a href="%s">%s<\/a><\/h1><\/li>',i,c(n.title));r[0].appendChild(t);r.unshift(document.createElement("ul"));t.appendChild(r[0])}});n.on("suite end",function(n){n.root||r.shift()});n.on("fail",function(t){"hook"==t.type&&n.emit("test end",t)});n.on("test end",function(n){var v=d.tests/this.total*100|0,c,l,i,t,a,f;e&&e.update(v).draw(tt);c=new w-d.start;o(rt,d.passes);o(ft,d.failures);o(ot,(c/1e3).toFixed(2));"passed"==n.state?(l=g.testURL(n),i=u('<li class="test pass %e"><h2>%e<span class="duration">%ems<\/span> <a href="%s" class="replay">‣<\/a><\/h2><\/li>',n.speed,n.title,n.duration,l)):n.pending?i=u('<li class="test pass pending"><h2>%e<\/h2><\/li>',n.title):(i=u('<li class="test fail"><h2>%e <a href="%e" class="replay">‣<\/a><\/h2><\/li>',n.title,g.testURL(n)),t=n.err.stack||n.err.toString(),~t.indexOf(n.err.message)||(t=n.err.message+"\n"+t),"[object Error]"==t&&(t=n.err.message),!n.err.stack&&n.err.sourceURL&&n.err.line!==undefined&&(t+="\n("+n.err.sourceURL+":"+n.err.line+")"),i.appendChild(u('<pre class="error">%e<\/pre>',t)));n.pending||(a=i.getElementsByTagName("h2")[0],s(a,"click",function(){f.style.display="none"==f.style.display?"block":"none"}),f=u("<pre><code>%e<\/code><\/pre>",h.clean(n.fn.toString())),i.appendChild(f),f.style.display="none");r[0]&&r[0].appendChild(i)})}function b(n){document.body.appendChild(u('<div id="mocha-error">%s<\/div>',n))}function u(n){var t=arguments,i=document.createElement("div"),r=1;return i.innerHTML=n.replace(/%([se])/g,function(n,i){switch(i){case"s":return String(t[r++]);case"e":return c(t[r++])}}),i.firstChild}function a(n){for(var r,i=document.getElementsByClassName("suite"),t=0;t<i.length;t++)r=i[t].getElementsByClassName(n),0==r.length&&(i[t].className+=" hidden")}function v(){for(var t=document.getElementsByClassName("suite hidden"),n=0;n<t.length;++n)t[n].className=t[n].className.replace("suite hidden","suite")}function o(n,t){n.textContent?n.textContent=t:n.innerText=t}function s(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent("on"+t,i)}var y=r("./base"),h=r("../utils"),p=r("../browser/progress"),c=h.escape,w=i.Date,k=i.setTimeout,d=i.setInterval,g=i.clearTimeout,nt=i.clearInterval,l,e;t=n.exports=f;l='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"><\/canvas><\/li><li class="passes"><a href="#">passes:<\/a> <em>0<\/em><\/li><li class="failures"><a href="#">failures:<\/a> <em>0<\/em><\/li><li class="duration">duration: <em>0<\/em>s<\/li><\/ul>';e=function(n){var t=window.location.search;return t&&(t=t.replace(/[?&]grep=[^&\s]*/g,"").replace(/^&/,"?")),window.location.pathname+(t?t+"&":"?")+"grep="+encodeURIComponent(n)};f.prototype.suiteURL=function(n){return e(n.fullTitle())};f.prototype.testURL=function(n){return e(n.fullTitle())}});n.register("reporters/index.js",function(n,t,i){t.Base=i("./base");t.Dot=i("./dot");t.Doc=i("./doc");t.TAP=i("./tap");t.JSON=i("./json");t.HTML=i("./html");t.List=i("./list");t.Min=i("./min");t.Spec=i("./spec");t.Nyan=i("./nyan");t.XUnit=i("./xunit");t.Markdown=i("./markdown");t.Progress=i("./progress");t.Landing=i("./landing");t.JSONCov=i("./json-cov");t.HTMLCov=i("./html-cov");t.JSONStream=i("./json-stream")});n.register("reporters/json-cov.js",function(n,r,u){function o(n,r){var u=this,r=1==arguments.length?!0:r;e.call(this,n);var o=[],h=[],c=[];n.on("test end",function(n){o.push(n)});n.on("pass",function(n){c.push(n)});n.on("fail",function(n){h.push(n)});n.on("end",function(){var e=i._$jscoverage||{},n=u.cov=s(e);(n.stats=u.stats,n.tests=o.map(f),n.failures=h.map(f),n.passes=c.map(f),r)&&t.stdout.write(JSON.stringify(n,null,2))})}function s(n){var t={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]},r,i;for(r in n)i=h(r,n[r]),t.files.push(i),t.hits+=i.hits,t.misses+=i.misses,t.sloc+=i.sloc;return t.files.sort(function(n,t){return n.filename.localeCompare(t.filename)}),t.sloc>0&&(t.coverage=t.hits/t.sloc*100),t}function h(n,t){var i={filename:n,coverage:0,hits:0,misses:0,sloc:0,source:{}};return t.source.forEach(function(n,r){r++;t[r]===0?(i.misses++,i.sloc++):t[r]!==undefined&&(i.hits++,i.sloc++);i.source[r]={source:n,coverage:t[r]===undefined?"":t[r]}}),i.coverage=i.hits/i.sloc*100,i}function f(n){return{title:n.title,fullTitle:n.fullTitle(),duration:n.duration}}var e=u("./base");r=n.exports=o});n.register("reporters/json-stream.js",function(n,i,r){function e(n){u.call(this,n);var i=this,e=this.stats,r=n.total;n.on("start",function(){console.log(JSON.stringify(["start",{total:r}]))});n.on("pass",function(n){console.log(JSON.stringify(["pass",f(n)]))});n.on("fail",function(n,t){n=f(n);n.err=t.message;console.log(JSON.stringify(["fail",n]))});n.on("end",function(){t.stdout.write(JSON.stringify(["end",i.stats]))})}function f(n){return{title:n.title,fullTitle:n.fullTitle(),duration:n.duration}}var u=r("./base"),o=u.color;i=n.exports=e});n.register("reporters/json.js",function(n,i,r){function e(n){var s=this;f.call(this,n);var i=[],r=[],e=[],o=[];n.on("test end",function(n){i.push(n)});n.on("pass",function(n){o.push(n)});n.on("fail",function(n){e.push(n)});n.on("pending",function(n){r.push(n)});n.on("end",function(){var f={stats:s.stats,tests:i.map(u),pending:r.map(u),failures:e.map(u),passes:o.map(u)};n.testResults=f;t.stdout.write(JSON.stringify(f,null,2))})}function u(n){return{title:n.title,fullTitle:n.fullTitle(),duration:n.duration,err:o(n.err||{})}}function o(n){var t={};return Object.getOwnPropertyNames(n).forEach(function(i){t[i]=n[i]},n),t}var f=r("./base"),s=f.cursor,h=f.color;i=n.exports=e});n.register("reporters/landing.js",function(n,i,r){function e(n){function h(){var n=Array(r).join("-");return"  "+f("runway",n)}u.call(this,n);var c=this,v=this.stats,r=u.window.width*.75|0,l=n.total,i=t.stdout,s=f("plane","✈"),e=-1,a=0;n.on("start",function(){i.write("\n\n\n  ");o.hide()});n.on("test end",function(n){var t=-1==e?r*++a/l|0:e;"failed"==n.state&&(s=f("plane crash","✈"),e=t);i.write("\x1b["+(r+1)+"D\x1b[2A");i.write(h());i.write("\n  ");i.write(f("runway",Array(t).join("⋅")));i.write(s);i.write(f("runway",Array(r-t).join("⋅")+"\n"));i.write(h());i.write("\x1b[0m")});n.on("end",function(){o.show();console.log();c.epilogue()})}function s(){}var u=r("./base"),o=u.cursor,f=u.color;i=n.exports=e;u.colors.plane=0;u.colors["plane crash"]=31;u.colors.runway=90;s.prototype=u.prototype;e.prototype=new s;e.prototype.constructor=e});n.register("reporters/list.js",function(n,i,r){function e(n){f.call(this,n);var i=this,e=this.stats,r=0;n.on("start",function(){console.log()});n.on("test",function(n){t.stdout.write(u("pass","    "+n.fullTitle()+": "))});n.on("pending",function(n){var t=u("checkmark","  -")+u("pending"," %s");console.log(t,n.fullTitle())});n.on("pass",function(n){var t=u("checkmark","  "+f.symbols.dot)+u("pass"," %s: ")+u(n.speed,"%dms");o.CR();console.log(t,n.fullTitle(),n.duration)});n.on("fail",function(n){o.CR();console.log(u("fail","  %d) %s"),++r,n.fullTitle())});n.on("end",i.epilogue.bind(i))}function s(){}var f=r("./base"),o=f.cursor,u=f.color;i=n.exports=e;s.prototype=f.prototype;e.prototype=new s;e.prototype.constructor=e});n.register("reporters/markdown.js",function(n,i,r){function o(n){function c(n){return Array(r).join("#")+" "+n}function o(n,t){var r=t,i=f+n.title;return t=t[i]=t[i]||{suite:n},n.suites.forEach(function(n){o(n,t)}),r}function s(n,t){var r,e,i;++t;r="";for(i in n)"suite"!=i&&(i!==f&&(e=" - ["+i.substring(1)+"]",e+="(#"+u.slug(n[i].suite.fullTitle())+")\n",r+=Array(t).join("  ")+e),r+=s(n[i],t));return r}function h(n){var t=o(n,{});return s(t,0)}e.call(this,n);var l=this,a=this.stats,r=0,i="";h(n.suite);n.on("suite",function(n){++r;var t=u.slug(n.fullTitle());i+='<a name="'+t+'"><\/a>\n';i+=c(n.title)+"\n"});n.on("suite end",function(){--r});n.on("pass",function(n){var t=u.clean(n.fn.toString());i+=n.title+".\n";i+="\n```js\n";i+=t+"\n";i+="```\n\n"});n.on("end",function(){t.stdout.write("# TOC\n");t.stdout.write(h(n.suite));t.stdout.write(i)})}var e=r("./base"),u=r("../utils"),f="$";i=n.exports=o});n.register("reporters/min.js",function(n,i,r){function u(n){f.call(this,n);n.on("start",function(){t.stdout.write("\x1b[2J");t.stdout.write("\x1b[1;3H")});n.on("end",this.epilogue.bind(this))}function e(){}var f=r("./base");i=n.exports=u;e.prototype=f.prototype;u.prototype=new e;u.prototype.constructor=u});n.register("reporters/nyan.js",function(n,i,r){function f(n){e.call(this,n);var t=this,f=this.stats,i=e.window.width*.75|0,o=this.rainbowColors=t.generateColors(),s=this.colorIndex=0,h=this.numberOfLines=4,c=this.trajectories=[[],[],[],[]],r=this.nyanCatWidth=11,l=this.trajectoryWidthMax=i-r,a=this.scoreboardWidth=5,v=this.tick=0;n.on("start",function(){e.cursor.hide();t.draw()});n.on("pending",function(){t.draw()});n.on("pass",function(){t.draw()});n.on("fail",function(){t.draw()});n.on("end",function(){e.cursor.show();for(var n=0;n<t.numberOfLines;n++)u("\n");t.epilogue()})}function u(n){t.stdout.write(n)}function o(){}var e=r("./base");i=n.exports=f;f.prototype.draw=function(){this.appendRainbow();this.drawScoreboard();this.drawRainbow();this.drawNyanCat();this.tick=!this.tick};f.prototype.drawScoreboard=function(){function t(n,t){u(" ");u(e.color(n,t));u("\n")}var n=this.stats;t("green",n.passes);t("fail",n.failures);t("pending",n.pending);u("\n");this.cursorUp(this.numberOfLines)};f.prototype.appendRainbow=function(){for(var n,i=this.tick?"_":"-",r=this.rainbowify(i),t=0;t<this.numberOfLines;t++)n=this.trajectories[t],n.length>=this.trajectoryWidthMax&&n.shift(),n.push(r)};f.prototype.drawRainbow=function(){var n=this;this.trajectories.forEach(function(t){u("\x1b["+n.scoreboardWidth+"C");u(t.join(""));u("\n")});this.cursorUp(this.numberOfLines)};f.prototype.drawNyanCat=function(){var t=this,f=this.scoreboardWidth+this.trajectories[0].length,i="\x1b["+f+"C",n="",r;u(i);u("_,------,");u("\n");u(i);n=t.tick?"  ":"   ";u("_|"+n+"/\\_/\\ ");u("\n");u(i);n=t.tick?"_":"__";r=t.tick?"~":"^";u(r+"|"+n+this.face()+" ");u("\n");u(i);n=t.tick?" ":"  ";u(n+'""  "" ');u("\n");this.cursorUp(this.numberOfLines)};f.prototype.face=function(){var n=this.stats;return n.failures?"( x .x)":n.pending?"( o .o)":n.passes?"( ^ .^)":"( - .-)"};f.prototype.cursorUp=function(n){u("\x1b["+n+"A")};f.prototype.cursorDown=function(n){u("\x1b["+n+"B")};f.prototype.generateColors=function(){for(var i=[],n=0;n<42;n++){var r=Math.floor(Math.PI/3),t=n*(1/6),u=Math.floor(3*Math.sin(t)+3),f=Math.floor(3*Math.sin(t+2*r)+3),e=Math.floor(3*Math.sin(t+4*r)+3);i.push(36*u+6*f+e+16)}return i};f.prototype.rainbowify=function(n){if(!e.useColors)return n;var t=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"\x1b[38;5;"+t+"m"+n+"\x1b[0m"};o.prototype=e.prototype;f.prototype=new o;f.prototype.constructor=f});n.register("reporters/progress.js",function(n,i,r){function f(n,i){u.call(this,n);var c=this,i=i||{},l=this.stats,s=u.window.width*.5|0,f=n.total,r=0,a=Math.max,h=-1;i.open=i.open||"[";i.complete=i.complete||"▬";i.incomplete=i.incomplete||u.symbols.dot;i.close=i.close||"]";i.verbose=!1;n.on("start",function(){console.log();e.hide()});n.on("test end",function(){r++;var l=f-r,u=r/f,n=s*u|0,c=s-n;(h!==n||i.verbose)&&(h=n,e.CR(),t.stdout.write("\x1b[J"),t.stdout.write(o("progress","  "+i.open)),t.stdout.write(Array(n).join(i.complete)),t.stdout.write(Array(c).join(i.incomplete)),t.stdout.write(o("progress",i.close)),i.verbose&&t.stdout.write(o("progress"," "+r+" of "+f)))});n.on("end",function(){e.show();console.log();c.epilogue()})}function s(){}var u=r("./base"),e=u.cursor,o=u.color;i=n.exports=f;u.colors.progress=90;s.prototype=u.prototype;f.prototype=new s;f.prototype.constructor=f});n.register("reporters/spec.js",function(n,t,i){function f(n){function t(){return Array(i).join("  ")}u.call(this,n);var f=this,s=this.stats,i=0,o=0;n.on("start",function(){console.log()});n.on("suite",function(n){++i;console.log(r("suite","%s%s"),t(),n.title)});n.on("suite end",function(){--i;1==i&&console.log()});n.on("pending",function(n){var i=t()+r("pending","  - %s");console.log(i,n.title)});n.on("pass",function(n){var i;"fast"==n.speed?(i=t()+r("checkmark","  "+u.symbols.ok)+r("pass"," %s"),e.CR(),console.log(i,n.title)):(i=t()+r("checkmark","  "+u.symbols.ok)+r("pass"," %s")+r(n.speed," (%dms)"),e.CR(),console.log(i,n.title,n.duration))});n.on("fail",function(n){e.CR();console.log(t()+r("fail","  %d) %s"),++o,n.title)});n.on("end",f.epilogue.bind(f))}function o(){}var u=i("./base"),e=u.cursor,r=u.color;t=n.exports=f;o.prototype=u.prototype;f.prototype=new o;f.prototype.constructor=f});n.register("reporters/tap.js",function(n,t,i){function f(n){r.call(this,n);var e=this,o=this.stats,t=1,i=0,f=0;n.on("start",function(){var t=n.grepTotal(n.suite);console.log("%d..%d",1,t)});n.on("test end",function(){++t});n.on("pending",function(n){console.log("ok %d %s # SKIP -",t,u(n))});n.on("pass",function(n){i++;console.log("ok %d %s",t,u(n))});n.on("fail",function(n,i){f++;console.log("not ok %d %s",t,u(n));i.stack&&console.log(i.stack.replace(/^/gm,"  "))});n.on("end",function(){console.log("# tests "+(i+f));console.log("# pass "+i);console.log("# fail "+f)})}function u(n){return n.fullTitle().replace(/#/g,"")}var r=i("./base"),e=r.cursor,o=r.color;t=n.exports=f});n.register("reporters/xunit.js",function(n,t,r){function u(n,t){o.call(this,n);var i=this.stats,r=[],u=this;if(t.reporterOptions&&t.reporterOptions.output){if(!s.createWriteStream)throw new Error("file output not supported in browser");u.fileStream=s.createWriteStream(t.reporterOptions.output)}n.on("pending",function(n){r.push(n)});n.on("pass",function(n){r.push(n)});n.on("fail",function(n){r.push(n)});n.on("end",function(){u.write(f("testsuite",{name:"Mocha Tests",tests:i.tests,failures:i.failures,errors:i.failures,skipped:i.tests-i.failures-i.passes,timestamp:(new l).toUTCString(),time:i.duration/1e3||0},!1));r.forEach(function(n){u.test(n)});u.write("<\/testsuite>")})}function h(){}function f(n,t,i,r){var o=i?"/>":">",u=[],f;for(var s in t)u.push(s+'="'+e(t[s])+'"');return f="<"+n+(u.length?" "+u.join(" "):"")+o,r&&(f+=r+"<\/"+n+o),f}function a(n){return"<![CDATA["+e(n)+"]\]>"}var o=r("./base"),c=r("../utils"),s=r("browser/fs"),e=c.escape,l=i.Date,v=i.setTimeout,y=i.setInterval,p=i.clearTimeout,w=i.clearInterval;t=n.exports=u;u.prototype.done=function(n,t){this.fileStream?this.fileStream.end(function(){t(n)}):t(n)};h.prototype=o.prototype;u.prototype=new h;u.prototype.constructor=u;u.prototype.write=function(n){this.fileStream?this.fileStream.write(n+"\n"):console.log(n)};u.prototype.test=function(n){var t={classname:n.parent.fullTitle(),name:n.title,time:n.duration/1e3||0},i;"failed"==n.state?(i=n.err,this.write(f("testcase",t,!1,f("failure",{},!1,a(e(i.message)+"\n"+i.stack))))):n.pending?this.write(f("testcase",t,!1,f("skipped",{},!0))):this.write(f("testcase",t,!0))}});n.register("runnable.js",function(n,t,r){function u(n,t){this.title=n;this.fn=t;this.async=t&&t.length;this.sync=!this.async;this._timeout=2e3;this._slow=75;this._enableTimeouts=!0;this.timedOut=!1;this._trace=new Error("done() called multiple times")}function h(){}var c=r("browser/events").EventEmitter,f=r("browser/debug")("mocha:runnable"),l=r("./pending"),e=r("./ms"),o=r("./utils"),s=i.Date,a=i.setTimeout,p=i.setInterval,v=i.clearTimeout,w=i.clearInterval,y=Object.prototype.toString;n.exports=u;h.prototype=c.prototype;u.prototype=new h;u.prototype.constructor=u;u.prototype.timeout=function(n){return 0==arguments.length?this._timeout:(n===0&&(this._enableTimeouts=!1),"string"==typeof n&&(n=e(n)),f("timeout %d",n),this._timeout=n,this.timer&&this.resetTimeout(),this)};u.prototype.slow=function(n){return 0===arguments.length?this._slow:("string"==typeof n&&(n=e(n)),f("timeout %d",n),this._slow=n,this)};u.prototype.enableTimeouts=function(n){return arguments.length===0?this._enableTimeouts:(f("enableTimeouts %s",n),this._enableTimeouts=n,this)};u.prototype.skip=function(){throw new l;};u.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title};u.prototype.clearTimeout=function(){v(this.timer)};u.prototype.inspect=function(){return JSON.stringify(this,function(n,t){if("_"!=n[0])return"parent"==n?"#<Suite>":"ctx"==n?"#<Context>":t},2)};u.prototype.resetTimeout=function(){var n=this,t=this.timeout()||1e9;this._enableTimeouts&&(this.clearTimeout(),this.timer=a(function(){n._enableTimeouts&&(n.callback(new Error("timeout of "+t+"ms exceeded. Ensure the done() callback is being called in this test.")),n.timedOut=!0)},t))};u.prototype.globals=function(n){var t=this;this._allowedGlobals=n};u.prototype.run=function(n){function c(n){f||(f=!0,i.emit("error",n||new Error("done() called multiple times; stacktrace may be inaccurate")))}function t(t){var r=i.timeout();if(!i.timedOut){if(u)return c(t||i._trace);i.state||(i.clearTimeout(),i.duration=new s-h,u=!0,!t&&i.duration>r&&i._enableTimeouts&&(t=new Error("timeout of "+r+"ms exceeded. Ensure the done() callback is being called in this test.")),n(t))}}function l(n){var u=n.call(r);u&&typeof u.then=="function"?(i.resetTimeout(),u.then(function(){t()},function(n){t(n||new Error("Promise rejected with no or falsy reason"))})):t()}var i=this,h=new s,r=this.ctx,u,f;if(r&&r.runnable&&r.runnable(this),this.callback=t,this.async){this.resetTimeout();try{this.fn.call(r,function(n){if(n instanceof Error||y.call(n)==="[object Error]")return t(n);if(null!=n)return Object.prototype.toString.call(n)==="[object Object]"?t(new Error("done() invoked with non-Error: "+JSON.stringify(n))):t(new Error("done() invoked with non-Error: "+n));t()})}catch(e){t(o.getError(e))}return}if(this.asyncOnly)return t(new Error("--async-only option in use without declaring `done()`"));try{this.pending?t():l(this.fn)}catch(e){t(o.getError(e))}}});n.register("runner.js",function(n,r,u){function f(n,t){var i=this;this._globals=[];this._abort=!1;this._delay=t;this.suite=n;this.total=n.total();this.failures=0;this.on("test end",function(n){i.checkGlobals(n)});this.on("hook end",function(n){i.checkGlobals(n)});this.grep(/.*/);this.globals(this.globalProps().concat(b()))}function l(){}function w(n,t){return c(t,function(t){if(/^d+/.test(t)||i.navigator&&/^getInterface/.test(t)||i.navigator&&/^\d+/.test(t)||/^mocha-/.test(t))return!1;var r=c(n,function(n){return~n.indexOf("*")?0==t.indexOf(n.split("*")[0]):t==n});return r.length==0&&(!i.navigator||"onerror"!==t)})}function b(){if(typeof t=="object"&&typeof t.version=="string"){var n=t.version.split(".").reduce(function(n,t){return n<<8|t});if(n<2315)return["errno"]}return[]}var a=u("browser/events").EventEmitter,e=u("browser/debug")("mocha:runner"),s=u("./pending"),k=u("./test"),o=u("./utils"),c=o.filter,d=o.keys,v=o.type,y=o.stringify,p=o.stackTraceFilter(),h=["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date","setImmediate","clearImmediate"];n.exports=f;f.immediately=i.setImmediate||t.nextTick;l.prototype=a.prototype;f.prototype=new l;f.prototype.constructor=f;f.prototype.grep=function(n,t){return e("grep %s",n),this._grep=n,this._invert=t,this.total=this.grepTotal(this.suite),this};f.prototype.grepTotal=function(n){var t=this,i=0;return n.eachTest(function(n){var r=t._grep.test(n.fullTitle());t._invert&&(r=!r);r&&i++}),i};f.prototype.globalProps=function(){for(var t=o.keys(i),n=0;n<h.length;++n)~o.indexOf(t,h[n])||t.push(h[n]);return t};f.prototype.globals=function(n){return 0==arguments.length?this._globals:(e("globals %j",n),this._globals=this._globals.concat(n),this)};f.prototype.checkGlobals=function(n){if(!this.ignoreLeaks){var i=this._globals,r=this.globalProps(),t;(n&&(i=i.concat(n._allowedGlobals||[])),this.prevGlobalsLength!=r.length)&&(this.prevGlobalsLength=r.length,t=w(i,r),this._globals=this._globals.concat(t),t.length>1?this.fail(n,new Error("global leaks detected: "+t.join(", ")+"")):t.length&&this.fail(n,new Error("global leak detected: "+t[0])))}};f.prototype.fail=function(n,t){++this.failures;n.state="failed";t instanceof Error||(t=new Error("the "+v(t)+" "+y(t)+" was thrown, throw an Error :)"));t.stack=this.fullStackTrace||!t.stack?t.stack:p(t.stack);this.emit("fail",n,t)};f.prototype.failHook=function(n,t){this.fail(n,t);this.suite.bail()&&this.emit("end")};f.prototype.hook=function(n,t){function u(n){var f=e[n];if(!f)return t();i.currentRunnable=f;f.ctx.currentTest=i.test;i.emit("hook",f);f.on("error",function(n){i.failHook(f,n)});f.run(function(e){f.removeAllListeners("error");var o=f.error();if(o&&i.fail(i.test,o),e)if(e instanceof s)r.pending=!0;else return i.failHook(f,e),t(e);i.emit("hook end",f);delete f.ctx.currentTest;u(++n)})}var r=this.suite,e=r["_"+n],i=this;f.immediately(function(){u(0)})};f.prototype.hooks=function(n,t,i){function f(e){if(r.suite=e,!e)return r.suite=u,i();r.hook(n,function(n){if(n){var e=r.suite;return r.suite=u,i(n,e)}f(t.pop())})}var r=this,u=this.suite;f(t.pop())};f.prototype.hookUp=function(n,t){var i=[this.suite].concat(this.parents()).reverse();this.hooks(n,i,t)};f.prototype.hookDown=function(n,t){var i=[this.suite].concat(this.parents());this.hooks(n,i,t)};f.prototype.parents=function(){for(var n=this.suite,t=[];n=n.parent;)t.push(n);return t};f.prototype.runTest=function(n){var t=this.test,i=this;this.asyncOnly&&(t.asyncOnly=!0);try{t.on("error",function(n){i.fail(t,n)});t.run(n)}catch(r){n(r)}};f.prototype.runTests=function(n,t){function f(n,r,u){var e=i.suite;i.suite=u?r.parent:r;i.suite?i.hookUp("afterEach",function(n,u){if(i.suite=e,n)return f(n,u,!0);t(r)}):(i.suite=e,t(r))}function u(o,h){if(i.failures&&n._bail||i._abort)return t();if(o)return f(o,h,!0);if(r=e.shift(),!r)return t();var c=i._grep.test(r.fullTitle());if(i._invert&&(c=!c),!c)return u();if(r.pending)return i.emit("pending",r),i.emit("test end",r),u();i.emit("test",i.test=r);i.hookDown("beforeEach",function(t,e){if(n.pending)return i.emit("pending",r),i.emit("test end",r),u();if(t)return f(t,e,!1);i.currentRunnable=i.test;i.runTest(function(n){if(r=i.test,n)return(n instanceof s?i.emit("pending",r):i.fail(r,n),i.emit("test end",r),n instanceof s)?u():i.hookUp("afterEach",u);r.state="passed";i.emit("pass",r);i.emit("test end",r);i.hookUp("afterEach",u)})})}var i=this,e=n.tests.slice(),r;this.next=u;u()};f.prototype.runSuite=function(n,t){function u(t){if(t)return t==n?r():r(t);if(i._abort)return r();var f=n.suites[o++];if(!f)return r();i.runSuite(f,u)}function r(r){i.suite=n;i.hook("afterAll",function(){i.emit("suite end",n);t(r)})}var f=this.grepTotal(n),i=this,o=0;if(e("run suite %s",n.fullTitle()),!f)return t();this.emit("suite",this.suite=n);this.hook("beforeAll",function(t){if(t)return r();i.runTests(n,u)})};f.prototype.uncaught=function(n){n?e("uncaught exception %s",n!==function(){return this}.call(n)?n:n.message||n):(e("uncaught undefined exception"),n=o.undefinedError());n.uncaught=!0;var t=this.currentRunnable;if(t&&(t.clearTimeout(),!t.state)){if(this.fail(t,n),"test"==t.type){this.emit("test end",t);this.hookUp("afterEach",this.next);return}this.emit("end")}};f.prototype.run=function(n){function u(n){i.uncaught(n)}function f(){i.emit("start");i.runSuite(r,function(){e("finished running");i.emit("end")})}var i=this,r=this.suite;n=n||function(){};e("start");this.on("end",function(){e("end");t.removeListener("uncaughtException",u);n(i.failures)});t.on("uncaughtException",u);if(this._delay){this.emit("waiting",r);r.once("run",f)}else f();return this};f.prototype.abort=function(){e("aborting");this._abort=!0}});n.register("suite.js",function(n,t,i){function r(n,t){this.title=n;var i=function(){};i.prototype=t;this.ctx=new i;this.suites=[];this.tests=[];this.pending=!1;this._beforeEach=[];this._beforeAll=[];this._afterEach=[];this._afterAll=[];this.root=!n;this._timeout=2e3;this._enableTimeouts=!0;this._slow=75;this._bail=!1;this.delayed=!1}function s(){}var h=i("browser/events").EventEmitter,u=i("browser/debug")("mocha:suite"),o=i("./ms"),e=i("./utils"),f=i("./hook");t=n.exports=r;t.create=function(n,t){var i=new r(t,n.ctx);return i.parent=n,n.pending&&(i.pending=!0),t=i.fullTitle(),n.addSuite(i),i};s.prototype=h.prototype;r.prototype=new s;r.prototype.constructor=r;r.prototype.clone=function(){var n=new r(this.title);return u("clone"),n.ctx=this.ctx,n.timeout(this.timeout()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.bail(this.bail()),n};r.prototype.timeout=function(n){return 0==arguments.length?this._timeout:(n.toString()==="0"&&(this._enableTimeouts=!1),"string"==typeof n&&(n=o(n)),u("timeout %d",n),this._timeout=parseInt(n,10),this)};r.prototype.enableTimeouts=function(n){return arguments.length===0?this._enableTimeouts:(u("enableTimeouts %s",n),this._enableTimeouts=n,this)};r.prototype.slow=function(n){return 0===arguments.length?this._slow:("string"==typeof n&&(n=o(n)),u("slow %d",n),this._slow=n,this)};r.prototype.bail=function(n){return 0==arguments.length?this._bail:(u("bail %s",n),this._bail=n,this)};r.prototype.beforeAll=function(n,t){if(this.pending)return this;"function"==typeof n&&(t=n,n=t.name);n='"before all" hook'+(n?": "+n:"");var i=new f(n,t);return i.parent=this,i.timeout(this.timeout()),i.enableTimeouts(this.enableTimeouts()),i.slow(this.slow()),i.ctx=this.ctx,this._beforeAll.push(i),this.emit("beforeAll",i),this};r.prototype.afterAll=function(n,t){if(this.pending)return this;"function"==typeof n&&(t=n,n=t.name);n='"after all" hook'+(n?": "+n:"");var i=new f(n,t);return i.parent=this,i.timeout(this.timeout()),i.enableTimeouts(this.enableTimeouts()),i.slow(this.slow()),i.ctx=this.ctx,this._afterAll.push(i),this.emit("afterAll",i),this};r.prototype.beforeEach=function(n,t){if(this.pending)return this;"function"==typeof n&&(t=n,n=t.name);n='"before each" hook'+(n?": "+n:"");var i=new f(n,t);return i.parent=this,i.timeout(this.timeout()),i.enableTimeouts(this.enableTimeouts()),i.slow(this.slow()),i.ctx=this.ctx,this._beforeEach.push(i),this.emit("beforeEach",i),this};r.prototype.afterEach=function(n,t){if(this.pending)return this;"function"==typeof n&&(t=n,n=t.name);n='"after each" hook'+(n?": "+n:"");var i=new f(n,t);return i.parent=this,i.timeout(this.timeout()),i.enableTimeouts(this.enableTimeouts()),i.slow(this.slow()),i.ctx=this.ctx,this._afterEach.push(i),this.emit("afterEach",i),this};r.prototype.addSuite=function(n){return n.parent=this,n.timeout(this.timeout()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.bail(this.bail()),this.suites.push(n),this.emit("suite",n),this};r.prototype.addTest=function(n){return n.parent=this,n.timeout(this.timeout()),n.enableTimeouts(this.enableTimeouts()),n.slow(this.slow()),n.ctx=this.ctx,this.tests.push(n),this.emit("test",n),this};r.prototype.fullTitle=function(){if(this.parent){var n=this.parent.fullTitle();if(n)return n+" "+this.title}return this.title};r.prototype.total=function(){return e.reduce(this.suites,function(n,t){return n+t.total()},0)+this.tests.length};r.prototype.eachTest=function(n){return e.forEach(this.tests,n),e.forEach(this.suites,function(t){t.eachTest(n)}),this};r.prototype.run=function(){this.root&&this.emit("run")}});n.register("test.js",function(n,t,i){function r(n,t){u.call(this,n,t);this.pending=!t;this.type="test"}function f(){}var u=i("./runnable");n.exports=r;f.prototype=u.prototype;r.prototype=new f;r.prototype.constructor=r});n.register("utils.js",function(n,i,r){function p(n){return!~y.indexOf(n)}function w(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1<\/span>').replace(/('.*?')/gm,'<span class="string">$1<\/span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1<\/span>').replace(/(\d+)/gm,'<span class="number">$1<\/span>').replace(/\bnew[ \t]+(\w+)/gm,'<span class="keyword">new<\/span> <span class="init">$1<\/span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1<\/span>')}function f(n,t,r){function a(n){switch(i.type(n)){case"null":case"undefined":n="["+n+"]";break;case"array":case"object":n=f(n,t,r+1);break;case"boolean":case"regexp":case"number":n=n===0&&1/n==-Infinity?"-0":n.toString();break;case"date":n="[Date: "+n.toISOString()+"]";break;case"buffer":var u=n.toJSON();u=u.data&&u.type?u.data:u;n="[Buffer: "+f(u,2,r+1)+"]";break;default:n=n=="[Function]"||n=="[Circular]"?n:'"'+n+'"'}return n}var u;if(typeof t=="undefined")return a(n);r=r||1;var s=t*r,o=e(n)?"[":"{",h=e(n)?"]":"}",c=n.length||i.keys(n).length,l=function(n,t){return new Array(t).join(n)};for(u in n)n.hasOwnProperty(u)&&(--c,o+="\n "+l(" ",s)+(e(n)?"":'"'+u+'": ')+a(n[u])+(c?",":""));return o+(o.length!=1?"\n"+l(" ",--s)+h:h)}var u=r("browser/fs"),o=r("browser/path"),l=o.basename,h=u.existsSync||o.existsSync,a=r("browser/glob"),c=o.join,v=r("browser/debug")("mocha:watch"),y=["node_modules",".git"],e,s;i.escape=function(n){return String(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};i.forEach=function(n,t,i){for(var r=0,u=n.length;r<u;r++)t.call(i,n[r],r)};i.map=function(n,t,i){for(var u=[],r=0,f=n.length;r<f;r++)u.push(t.call(i,n[r],r,n));return u};i.indexOf=function(n,t,i){for(var r=i||0,u=n.length;r<u;r++)if(n[r]===t)return r;return-1};i.reduce=function(n,t,i){for(var u=i,r=0,f=n.length;r<f;r++)u=t(u,n[r],r,n);return u};i.filter=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i,n)&&u.push(r);return u};i.keys=Object.keys||function(n){var t=[],r=Object.prototype.hasOwnProperty;for(var i in n)r.call(n,i)&&t.push(i);return t};i.watch=function(n,t){var i={interval:100};n.forEach(function(n){v("file %s",n);u.watchFile(n,i,function(i,r){r.mtime<i.mtime&&t(n)})})};e=Array.isArray||function(n){return"[object Array]"=={}.toString.call(n)};typeof Buffer!="undefined"&&Buffer.prototype&&(Buffer.prototype.toJSON=Buffer.prototype.toJSON||function(){return Array.prototype.slice.call(this,0)});i.files=function(n,t,r){r=r||[];t=t||["js"];var f=new RegExp("\\.("+t.join("|")+")$");return u.readdirSync(n).filter(p).forEach(function(e){e=c(n,e);u.statSync(e).isDirectory()?i.files(e,t,r):e.match(f)&&r.push(e)}),r};i.slug=function(n){return n.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")};i.clean=function(n){n=n.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,"").replace(/^function *\(.*\)\s*{|\(.*\) *=> *{?/,"").replace(/\s+\}$/,"");var r=n.match(/^\n?( *)/)[1].length,t=n.match(/^\n?(\t*)/)[1].length,u=new RegExp("^\n?"+(t?"\t":" ")+"{"+(t?t:r)+"}","gm");return n=n.replace(u,""),i.trim(n)};i.trim=function(n){return n.replace(/^\s+|\s+$/g,"")};i.parseQuery=function(n){return i.reduce(n.replace("?","").split("&"),function(n,t){var i=t.indexOf("="),r=t.slice(0,i),u=t.slice(++i);return n[r]=decodeURIComponent(u),n},{})};i.highlightTags=function(n){for(var i=document.getElementById("mocha").getElementsByTagName(n),t=0,r=i.length;t<r;++t)i[t].innerHTML=w(i[t].innerHTML)};s=function(n,t){t=t||i.type(n);switch(t){case"function":return"[Function]";case"object":return"{}";case"array":return"[]";default:return n.toString()}};i.type=function(n){return typeof Buffer!="undefined"&&Buffer.isBuffer(n)?"buffer":Object.prototype.toString.call(n).replace(/^\[.+\s(.+?)\]$/,"$1").toLowerCase()};i.stringify=function(n){var r=i.type(n),t,u;if(!~i.indexOf(["object","array","function"],r))return r!="buffer"?f(n):(t=n.toJSON(),f(t.data&&t.type?t.data:t,2).replace(/,(\n|$)/g,"$1"));for(u in n)if(Object.prototype.hasOwnProperty.call(n,u))return f(i.canonicalize(n),2).replace(/,(\n|$)/g,"$1");return s(n,r)};i.isBuffer=function(n){return typeof Buffer!="undefined"&&Buffer.isBuffer(n)};i.canonicalize=function(n,t){var r,u=i.type(n),e,f=function(n,i){t.push(n);i();t.pop()};if(t=t||[],i.indexOf(t,n)!==-1)return"[Circular]";switch(u){case"undefined":case"buffer":case"null":r=n;break;case"array":f(n,function(){r=i.map(n,function(n){return i.canonicalize(n,t)})});break;case"function":for(e in n){r={};break}if(!r){r=s(n,u);break}case"object":r=r||{};f(n,function(){i.forEach(i.keys(n).sort(),function(u){r[u]=i.canonicalize(n[u],t)})});break;case"date":case"number":case"regexp":case"boolean":r=n;break;default:r=n.toString()}return r};i.lookupFiles=function b(n,t,i){var r=[],e=new RegExp("\\.("+t.join("|")+")$"),f;if(!h(n))if(h(n+".js"))n+=".js";else{if(r=a.sync(n),!r.length)throw new Error("cannot resolve path (or pattern) '"+n+"'");return r}try{if(f=u.statSync(n),f.isFile())return n}catch(o){return}return u.readdirSync(n).forEach(function(f){f=c(n,f);try{var o=u.statSync(f);if(o.isDirectory()){i&&(r=r.concat(b(f,t,i)));return}}catch(s){return}o.isFile()&&e.test(f)&&l(f)[0]!=="."&&r.push(f)}),r};i.undefinedError=function(){return new Error("Caught undefined error, did you throw without specifying what?")};i.getError=function(n){return n||i.undefinedError()};i.stackTraceFilter=function(){function f(n){return~n.indexOf("node_modules")}function e(t){return~t.indexOf("node_modules"+n+"mocha")||~t.indexOf("components"+n+"mochajs")||~t.indexOf("components"+n+"mocha")}function o(n){return~n.indexOf("node_modules")||~n.indexOf("components")}function s(n){return~n.indexOf("(timers.js:")||~n.indexOf("(events.js:")||~n.indexOf("(node.js:")||~n.indexOf("(module.js:")||~n.indexOf("GeneratorFunctionPrototype.next (native)")||!1}var n="/",r=typeof document=="undefined"?{node:!0}:{browser:!0},u=r.node?t.cwd()+n:location.href.replace(/\/[^\/]*$/,"/");return function(n){return n=n.split("\n"),n=i.reduce(n,function(n,t){return r.node&&(f(t)||e(t)||s(t))?n:r.browser&&o(t)?n:(n.push(t.replace(u,"")),n)},[]),n.join("\n")}}});var i=function(){return this}(),h=i.Date,c=i.setTimeout,a=i.setInterval,v=i.clearTimeout,y=i.clearInterval,t={};t.exit=function(){};t.stdout={};f=[];s=i.onerror;t.removeListener=function(n,t){if("uncaughtException"==n){i.onerror=s?s:function(){};var r=u.utils.indexOf(f,t);r!=-1&&f.splice(r,1)}};t.on=function(n,t){"uncaughtException"==n&&(i.onerror=function(n,i,r){return t(new Error(n+" ("+i+":"+r+")")),!0},f.push(t))};u=i.Mocha=n("mocha");r=i.mocha=new u({reporter:"html"});r.suite.removeAllListeners("pre-require");e=[];u.Runner.immediately=function(n){e.push(n);o||(o=c(l,0))};r.throwError=function(n){u.utils.forEach(f,function(t){t(n)});throw n;};r.ui=function(n){return u.prototype.ui.call(this,n),this.suite.emit("pre-require",i,null,this),this};r.setup=function(n){"string"==typeof n&&(n={ui:n});for(var t in n)this[t](n[t]);return this};r.run=function(n){var f=r.options,t;return r.globals("location"),t=u.utils.parseQuery(i.location.search||""),t.grep&&r.grep(new RegExp(t.grep)),t.fgrep&&r.grep(t.fgrep),t.invert&&r.invert(),u.prototype.run.call(r,function(t){var r=i.document;r&&r.getElementById("mocha")&&f.noHighlighting!==!0&&u.utils.highlightTags("code");n&&n(t)})};u.process=t})();